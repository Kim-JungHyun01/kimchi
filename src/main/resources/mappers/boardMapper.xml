<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.kr.kimchi.mappers.BoardMapper">
  
  <insert id="create" parameterType="com.kr.kimchi.vo.BoardVO">
  insert into board (board_title, board_content, board_comment, board_createdDate, board_modifiedDate, attachment_no, user_id)
  values(#{board_title}, #{board_content}, #{board_comment}, now(), now(), #{attachment_no}, #{user_id})
  </insert>
  
  <select id="read" resultType="com.kr.kimchi.vo.BoardVO">
   select
   board_no, board_title, board_content, board_comment, board_createdDate, board_modifiedDate, attachment_no, user_id
  from
   board
  where board_no = #{board_no} 
   </select>
  
  <update id="update">
   update board set board_title =#{board_title}, 
                  board_content =#{board_content},
                  board_comment =#{board_comment}
  where board_no =#{board_no}                   
   </update>
  
  <delete id="delete">
  delete from board where board_no =#{board_no}
    </delete>
  
  <select id="listAll" resultType="com.kr.kimchi.vo.BoardVO">
   <![CDATA[
    select
   board_no, board_title, board_content, board_comment, board_createdDate, board_modifiedDate, attachment_no, user_id
  from
   board
  where board_no > 0
  order by board_no desc, board_createdDate desc
  LIMIT #{startRow}, #{pageSize}
   ]]>
   </select>
   
   <!-- 전체 listAll의 총 개수 조회 -->
    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*) FROM board;
    </select>
  
  </mapper>